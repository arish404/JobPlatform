{% extends 'base.html' %}
{% block title %}Jobs{% endblock %}

{% block content %}
<h1 class="text-center my-5">Available Jobs</h1>
{% load static %}
<div class="container">
    {% for job in jobs %}
    <div class="card shadow-lg mb-4 rounded-3">
        <div class="card-body">
            <!-- Company Logo and Name -->
            <div class="d-flex align-items-center mb-3">
                {% if job.company_logo %}
                    <img src="{{ job.company_logo.url }}" alt="{{ job.company_name }} Logo"
                        class="img-fluid rounded-circle" style="width: 50px; height: 50px; margin-right: 15px;">
                {% else %}
                    <img src="{% static 'images/default-profile.png' %}" alt="Default Logo"
                        class="img-fluid rounded-circle" style="width: 50px; height: 50px; margin-right: 15px;">
                {% endif %}
                <h4 class="card-title text-primary mb-0">{{ job.company_name }}</h4>
            </div>
            <h5 class="card-title text-dark mb-2">{{ job.title }}</h5>
            <p class="card-text">{{ job.description }}</p>

            <!-- Skills Required Section -->
            <div class="mt-3">
                <strong>Skills Required:</strong>
                <div class="d-flex flex-wrap mt-2">
                    {% for skill in job.skill %}
                    <span class="badge rounded-pill bg-info text-white me-2 mb-2" style="font-size: 14px; padding: 8px 16px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);">
                        {{ skill }}
                    </span>
                    {% endfor %}
                </div>
            </div>

            <!-- Apply Button -->
            <div class="mt-3">
                {% if not request.user.is_authenticated %}
                    <a href="{% url 'login' %}" class="btn btn-outline-primary btn-sm rounded-pill">Login to Apply</a>
                {% elif request.user.is_candidate %}
                    {% if job.applied %}
                        <button class="btn btn-secondary btn-sm rounded-pill" disabled>Applied</button>
                    {% else %}
                        <a href="{% url 'job_detail' job.id %}" class="btn btn-success btn-sm rounded-pill">Apply Now</a>
                    {% endif %}
                {% elif request.user.is_company %}
                    <button class="btn btn-secondary btn-sm rounded-pill" disabled>Apply Not Available</button>
                {% endif %}
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<!-- No Jobs Found -->
{% if jobs|length == 0 %}
<div class="text-center mt-5">
    <h4 class="text-muted">No jobs available at the moment. Please check back later.</h4>
</div>
{% endif %}
{% endblock %}
